<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gajju | Dog vs Cat Classifier</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(180deg, #0b1220, #020617);
      color: #e5e7eb;
      min-height: 100vh;
    }
    .navbar { background: #020617; }
    .upload-box {
      border: 2px dashed #22d3ee;
      border-radius: 16px;
      padding: 40px;
      text-align: center;
      cursor: pointer;
      background: #020617;
    }
    .upload-box.dragover { border-color: #38bdf8; }
    .btn-primary {
      background: #22d3ee;
      border: none;
      color: #020617;
      font-weight: 600;
    }
    .preview-img {
      max-width: 260px;
      border-radius: 12px;
      margin-top: 15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    }
    footer { color: #94a3b8; }
  </style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar py-3">
  <div class="container d-flex align-items-center gap-3">
    <img src="/static/gajjulogo.svg" width="40" />
    <span class="fw-bold fs-3 text-info">Gajju</span>
  </div>
</nav>

<!-- HERO -->
<section class="container py-5">
  <div class="row align-items-center">
    <div class="col-md-6">
      <h1 class="fw-bold">Dog vs Cat Image Classification</h1>
      <p class="text-secondary mt-3">
        Upload or drag an image and <strong>Gajju</strong> will classify it using
        classical ML (HOG + PCA + SVM).
      </p>
      <span class="badge bg-success fs-6">Model Accuracy: {{ accuracy }}%</span>
    </div>
  </div>
</section>

<!-- UPLOAD -->
<section class="container mb-5">
  <form method="POST" enctype="multipart/form-data">
    <div id="uploadBox" class="upload-box mb-3">
      <p class="fs-5 text-info mb-1">Drag & Drop Image Here</p>
      <p class="text-secondary">or click to browse</p>
      <input type="file" id="fileInput" name="image" accept="image/*" hidden required>
      <p id="fileName" class="mt-3 text-success fw-semibold"></p>
      <img id="preview" class="preview-img d-none">
    </div>
    <button class="btn btn-primary w-100 py-2">Predict</button>
  </form>
</section>

<!-- RESULT -->
{% if prediction %}
<section class="container text-center mb-5">
  <h3 class="mb-3">Prediction Result</h3>

  <div class="alert alert-success fs-4">
    {{ prediction }}
  </div>

  <div class="btn-group mb-3">
    <button class="btn btn-outline-info" onclick="showHuman()">Human View</button>
    <button class="btn btn-outline-info" onclick="showHog()">AI View (HOG)</button>
  </div>

  <div>
    <img id="humanView" src="{{ image }}" class="preview-img">
    <img id="hogView" src="{{ hog_image }}" class="preview-img d-none">
  </div>
</section>
{% endif %}

<footer class="text-center mb-3">
  Powered by <strong>Gajju</strong> â€¢ Classical ML (HOG + PCA + SVM)
</footer>

<script>
  const uploadBox = document.getElementById("uploadBox");
  const fileInput = document.getElementById("fileInput");
  const fileName = document.getElementById("fileName");
  const preview = document.getElementById("preview");

  uploadBox.onclick = () => fileInput.click();
  uploadBox.ondragover = e => { e.preventDefault(); uploadBox.classList.add("dragover"); };
  uploadBox.ondragleave = () => uploadBox.classList.remove("dragover");
  uploadBox.ondrop = e => {
    e.preventDefault();
    uploadBox.classList.remove("dragover");
    fileInput.files = e.dataTransfer.files;
    showPreview();
  };

  fileInput.onchange = showPreview;

  function showPreview() {
    const file = fileInput.files[0];
    if (!file) return;
    fileName.textContent = "Selected file: " + file.name;
    const reader = new FileReader();
    reader.onload = () => {
      preview.src = reader.result;
      preview.classList.remove("d-none");
    };
    reader.readAsDataURL(file);
  }

  function showHuman() {
    document.getElementById("humanView").classList.remove("d-none");
    document.getElementById("hogView").classList.add("d-none");
  }

  function showHog() {
    document.getElementById("hogView").classList.remove("d-none");
    document.getElementById("humanView").classList.add("d-none");
  }
</script>

</body>
</html>
